$include "Libraries/Rogue/Plasmacore"
uses Plasmacore

class Settings [singleton]
  PROPERTIES
    on_exit : Message
endClass

println "** Rogue **"
MessageListener//ShouldTerminate = (m) => m.reply.[write_logical(false)].send; Settings.on_exit.send
MessageListener//NotifyOnExit = (m) => Settings.on_exit = m.reply
Message("Log").[ write_string("Hello World") ].send
Message("Marco").send_rsvp( (m) => println "FN:" + m.read_string )

